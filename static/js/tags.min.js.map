{"version":3,"sources":["tags.js"],"names":["$","fn","extend","tags","filters","this","each","$this","_config","language","ajax","url","baseuri","dataType","type","delay","data","params","v","page","_token","crsf","of","keywords","like","term","console","log","processResults","json","result","items","i","length","push","id","text","count","selection","results","cache","escapeMarkup","markup","minimumInputLength","templateResult","templateSelection","createTag","trim","newTag","select2","jQuery"],"mappings":";CAAA,SAAUA,GACVA,EAAEC,GAAGC,QAAQC,KAAM,SAASC,GAC3B,MAAOC,MAAKC,KAAK,WAChB,GAAIC,GAAQP,EAAEK,MACVG,GACHC,SAAU,QACVC,MACCC,IAAKX,EAAEY,QAAS,WAChBC,SAAU,OACVC,KAAM,OACNC,MAAO,IACPC,KAAM,SAAUC,GACf,GAAIC,IAAKC,KAAMF,EAAOE,KAAMC,OAAQpB,EAAEqB,KAAMjB,WAAakB,GAAI,OAG7D,OAFAJ,GAAEd,QAAQmB,UAAYC,KAAQP,EAAOQ,MACrCP,EAAEd,QAAUJ,EAAEE,UAAWgB,EAAEd,QAASA,GAASsB,QAAQC,IAAIT,GAClDA,GAERU,eAAgB,SAAUC,EAAMV,GAC/B,GAAmB,WAAfU,EAAKC,QAAsC,OAAfD,EAAKC,OAAiB,OAAQA,UAE9D,KAAI,GADAd,MAAWe,EAAQF,EAAKb,KAAKA,KACzBgB,EAAI,EAAGA,EAAID,EAAME,SAAUD,EAClChB,EAAKkB,MAAMC,GAAMJ,EAAMC,GAAGT,SAAUa,KAAQL,EAAMC,GAAGT,SAAW,+BAAgCQ,EAAMC,GAAGK,OAAS,GAAK,6BAAeC,UAAaP,EAAMC,GAAGT,UAC7J,QAAQgB,QAASvB,IAElBwB,OAAO,GAERC,aAAc,SAAUC,GAAS,MAAOA,IACxCC,mBAAoB,EACpBC,eAAgB,SAAS5B,GAAM,MAAOA,GAAKoB,MAC3CS,kBAAmB,SAAS7B,GAAM,MAAOA,GAAKsB,WAAatB,EAAKoB,MAChEU,UAAW,SAAU7B,GACpB,GAAIQ,GAAOzB,EAAE+C,KAAK9B,EAAOQ,KACzB,OAAa,KAATA,EAAoB,MAEvBU,GAAIV,EACJa,UAAWb,EACXW,KAAMX,EAAO,qDACbuB,QAAQ,IAIXzC,GAAM0C,QAAQjD,EAAEE,QAAQC,MAAM,GAAOK,UAGpC0C","file":"tags.min.js","sourcesContent":["(function($){\r\n$.fn.extend({tags: function(filters){\r\n\treturn this.each(function(){\r\n\t\tvar $this = $(this);\r\n\t\tvar _config = {\r\n\t\t\tlanguage: \"zh-CN\",\r\n\t\t\tajax: {\r\n\t\t\t\turl: $.baseuri +'tag/data',\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\ttype: 'post',\r\n\t\t\t\tdelay: 250,\r\n\t\t\t\tdata: function (params) {\r\n\t\t\t\t\tvar v = {page: params.page, _token: $.crsf, filters: {}, of: 'json'};\r\n\t\t\t\t\tv.filters.keywords = {'like': params.term};\r\n\t\t\t\t\tv.filters = $.extend({}, v.filters, filters);console.log(v);\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t},\r\n\t\t\t\tprocessResults: function (json, page) {\r\n\t\t\t\t\tif (json.result != 'success' && json.result != 'api') return {result: []};\r\n\t\t\t\t\tvar data = [], items = json.data.data;\r\n\t\t\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t\t\t\tdata.push({'id': items[i].keywords, 'text': items[i].keywords + ' <span class=\"text-muted\">('+ (items[i].count || 0) + '次使用)</span>', 'selection': items[i].keywords });\r\n\t\t\t\t\treturn {results: data};\r\n\t\t\t\t},\r\n\t\t\t\tcache: true\r\n\t\t\t},\r\n\t\t\tescapeMarkup: function (markup) {return markup;},\r\n\t\t\tminimumInputLength: 1,\r\n\t\t\ttemplateResult: function(data){return data.text;},\r\n\t\t\ttemplateSelection: function(data){return data.selection || data.text;},\r\n\t\t\tcreateTag: function (params) {\r\n\t\t\t\tvar term = $.trim(params.term);\r\n\t\t\t\tif (term === '') return null;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: term,\r\n\t\t\t\t\tselection: term,\r\n\t\t\t\t\ttext: term + ' <span style=\"color:#f5f5f5\">(创建)</span>',\r\n\t\t\t\t\tnewTag: true // add additional parameters\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\t\t$this.select2($.extend({tags: true}, _config));\r\n\t});\r\n}});\r\n})(jQuery);"]}