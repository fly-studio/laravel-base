/*! table.js 2016-11-14 17:08:03*/
!function(a){a().ready(function(){var t=function(t){a('a[method="delete"]',t).query(function(t){"success"!=t.result&&"api"!=t.result||!t.data.id||(a.datatable_config&&a.datatable_config.datatable?a.datatable_config.datatable.ajax.reload(null,!1):t.data.id.forEach(function(t){a("#line-"+t).fadeOut(function(){a(this).remove()})}))},{layout:"topCenter",modal:!1}),a('a[method]:not([method="delete"])',t).query()};t.call(this,document.body),a("thead input:checkbox").click(function(t){var e=a(this).prop("checked"),i=a(this).closest("table");t.stopPropagation(),a("tbody input:checkbox:visible",i).each(function(){a(this).prop("checked",e)})}),a.datatable_config&&(jQuery.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}},jQuery.extend(jQuery.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(a,t,e){var i=a.oLanguage.oPaginate,o=(a.oInstance.fnPagingInfo(),function(t){t.preventDefault(),a._iDisplayLength=parseInt(a._iDisplayLength,10),a._iDisplayStart=parseInt(a._iDisplayStart,10),a.oApi._fnPageChange(a,t.data.action)&&e(a)});jQuery(t).append('<ul class="pagination pagination-sm remove-margin"><li class="first disabled"><a href="javascript:void(0)"><i class="glyphicon glyphicon-step-backward"></i> '+i.sFirst+'</a></li><li class="prev disabled"><a href="javascript:void(0)"><i class="glyphicon glyphicon-chevron-left"></i> '+i.sPrevious+'</a></li><li class="next disabled"><a href="javascript:void(0)">'+i.sNext+' <i class="glyphicon glyphicon-chevron-right"></i></a></li><li class="last disabled"><a href="javascript:void(0)">'+i.sLast+' <i class="glyphicon glyphicon-step-forward"></i></a></li><li class="more"><a href="javascript:void(0)"><i class="glyphicon glyphicon-option-horizontal"></i></a></li></ul>');var n=jQuery("a",t);jQuery(n[0]).on("click.DT",{action:"first"},o),jQuery(n[1]).on("click.DT",{action:"previous"},o),jQuery(n[2]).on("click.DT",{action:"next"},o),jQuery(n[3]).on("click.DT",{action:"last"},o),jQuery.fn.slider&&jQuery(n[4]).popover({html:!0,title:"",content:'<input type="text" id="datatable-paginate-slider" class="form-control" value="1" data-slider-selection="after" data-slider-tooltip="show">',placement:"left",trigger:"focus",container:t})},fnUpdate:function(a,t){var e,i,o,n,l,r=5,s=a.oInstance.fnPagingInfo(),c=a.aanFeatures.p,d=Math.floor(r/2);for(s.iTotalPages<r?(n=1,l=s.iTotalPages):s.iPage<=d?(n=1,l=r):s.iPage>=s.iTotalPages-d?(n=s.iTotalPages-r+1,l=s.iTotalPages):(n=s.iPage-d+1,l=n+r-1),e=0,iLen=c.length;iLen>e;e++){jQuery("li:not(.first,.prev,.next,.last,.more)",c[e]).remove();var p=jQuery("a:eq(4)",c[e]);for(s.iTotalPages>1?p.off("shown.bs.popover").on("shown.bs.popover",function(){jQuery("#datatable-paginate-slider").slider({value:parseInt(s.iPage)+1,max:parseInt(s.iTotalPages),min:1,step:1,formatter:function(a){return"Page: "+a}}).on("slideStop",function(){var e=parseInt(jQuery(this).data("slider").getValue());a._iDisplayStart=(parseInt(e,10)-1)*s.iLength,t(a),p.popover("hide").blur()})}):p.hide(),i=n;l>=i;i++)o=i===s.iPage+1?'class="active"':"",jQuery("<li "+o+'><a href="javascript:void(0)">'+i+"</a></li>").insertBefore(jQuery("li.next",c[e])[0]).on("click",function(e){e.preventDefault(),a._iDisplayStart=(parseInt(jQuery("a",this).text(),10)-1)*s.iLength,t(a)});0===s.iPage?jQuery("li.first,li.prev",c[e]).addClass("disabled"):jQuery("li.first,li.prev",c[e]).removeClass("disabled"),s.iPage===s.iTotalPages-1||0===s.iTotalPages?jQuery("li.last,li.next",c[e]).addClass("disabled"):jQuery("li.last,li.next",c[e]).removeClass("disabled")}}}}),a.extend(!0,a.fn.dataTable.defaults,{dom:"<'row'<'col-sm-6 col-xs-5'l><'col-sm-6 col-xs-7 search-filter text-right'f><'clearfix'>r>t<'row'<'col-sm-5 hidden-xs'i><'col-sm-7 col-xs-12 clearfix'p>>",pagingType:"bootstrap",language:{lengthMenu:"_MENU_",search:'<div class="input-group">_INPUT_<span class="input-group-addon"><i class="fa fa-search"></i></span></div>',info:"<strong>_START_</strong>-<strong>_END_</strong> of <strong>_TOTAL_</strong>",infoEmpty:"<strong>0</strong>-<strong>0</strong> of <strong>0</strong>",infoFiltered:"(from <strong>_MAX_</strong>)",paginate:{previous:"",next:"",first:"",last:""},processing:'<div class="alert text-center"><i class="gi gi-refresh"></i> Loading...</div>'},column:{asSorting:["desc","asc"]}}),a.extend(a.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline",sFilterInput:"form-control",sLengthSelect:"form-control"}),a.datatable_config.encode=function(t){var e={displayStart:t._iDisplayStart,pageLength:t._iDisplayLength,order:[]};return t.aLastSort.forEach(function(a){e.order.push([a.col,a.dir])}),a.bbq.pushState(e),!0},a.datatable_config.decode=function(){var t=a.bbq.getState();return t&&(a.datatable_config=a.extend(a.datatable_config,t)),!0},a.datatable_config.decode(),a.datatable_config.datatable=a("#datatable").DataTable({ajax:{url:a.baseuri+a.datatable_config.namespace+"/"+a.datatable_config.name+"/data/json",timeout:2e4,type:"POST",data:function(t){return a.extend({},t,{filters:window.location.query("filters")})},dataSrc:function(t){return t&&"success"==t.result||"api"==t.result?(t.recordsTotal=t.data.recordsTotal,t.recordsFiltered=t.data.recordsFiltered,t.data.data.forEach(function(a,t){a.DT_RowId="line-"+(a.id?a.id:t)}),t.data.data):(a.showtips(t),[])}},autoWidth:!1,searching:!1,processing:!0,deferRender:!0,serverSide:!0,displayStart:parseInt(a.datatable_config.displayStart,10),pageLength:parseInt(a.datatable_config.pageLength,10),order:a.datatable_config.order,columns:a.datatable_config.columns,searchDelay:parseInt(a.datatable_config.searchDelay,10),rowCallback:function(t,e,i){a.datatable_config.onDrawingRow&&a.datatable_config.onDrawingRow.call(this,t,e,i)},createdRow:function(e,i,o){t.call(this,e),a.fn.tooltip&&a('[data-toggle="tooltip"], .enable-tooltip',e).tooltip({container:"body",animation:!1}),a.fn.popover&&a('[data-toggle="popover"], .enable-popover').popover({container:"body",animation:!0}),a.datatable_config.onCreateRow&&a.datatable_config.onCreateRow.call(this,e,i,o)},drawCallback:function(t){a.datatable_config.encode(t),a.datatable_config.onDrawCallback&&a.datatable_config.onDrawCallback.call(this,t)}}),a(".dataTables_filter input",a.datatable_config.datatable).attr("placeholder","\u68c0\u7d22ID"),a('<a href="javascript:void(0);" class="btn btn-link"><i class="glyphicon glyphicon-refresh"></i> \u91cd\u65b0\u52a0\u8f7d</a>').appendTo(".search-filter").on("click",function(){a.datatable_config.datatable.ajax.reload(null,!1)}))})}(jQuery);
//# sourceMappingURL=table.min.js.map
