/*! table.js 2016-12-13 19:40:00*/
!function(a){a().ready(function(){var e={config:{}},t=a("#datatable");e.bindMethods=function(t){a('a[method]:not([method="delete"])',t).query(),a('a[method="delete"]',t).query(function(t){"success"!=t.result&&"api"!=t.result||!t.data.id||(e.datatable&&t.url===!0?e.datatable.ajax.reload(null,!1):t.data.id.forEach(function(e){a("#line-"+e).fadeOut(function(){a(this).remove()})}))},{layout:"topCenter",modal:!1}),a(t).is("tr")&&(a(t).on("click","*",function(e){a(e.target).is("a,button,:checkbox")||a("td:eq(0) :checkbox",a(this).closest("tr")).trigger("click")}),a("td:eq(0) :checkbox",t).on("click",function(e){var t=a(this).closest("tr");this.checked?t.addClass("active"):t.removeClass("active")}))},e.getConfig=function(){for(var e=["name","namespace","displayStart","pageLength"],o={},n=0;n<e.length;n++)o[e[n]]=t.data(e[n])||null;var r=a.bbq.getState();return r&&(o=a.extend(!0,o,r)),o.displayStart=~~o.displayStart,o.pageLength=~~o.pageLength,t.data(o),o},e.setConfig=function(e){var t={displayStart:e._iDisplayStart,pageLength:e._iDisplayLength,search:{search:e.oPreviousSearch.sSearch},order:[]};return e.aLastSort.forEach(function(a){t.order.push([a.col,a.dir])}),a.bbq.pushState(t),!0},e.getColumns=function(e){var o=[];return a("tbody td,tbody th",t).each(function(e,t){var n=a(this),r=template.compile(n.html()),s={data:n.data("from")||null,orderable:n.data("orderable")!==!1,cellType:this.tagName.toLowerCase(),className:this.className,contentPadding:n.data("contentPadding")||null,defaultContent:n.data("defaultContent")||null,name:this.name||null,orderData:n.data("orderData"),orderDataType:n.data("orderDataType")||null,orderSequence:n.data("orderSequence")||["asc","desc"],render:function(a,e,t){var o={data:a,type:e,full:t};return r(o)},searchable:n.data("searchable")!==!1,visible:n.data("visible")!==!1};o.push(s)}),e===!0&&a("tbody",t).empty(),o},a.fn.dataTable.ext.renderer.pageButton.bootstrap=function(e,t,o,n,r,s){var i,l,d,c=new a.fn.dataTable.Api(e),p=e.oClasses,u=e.oLanguage.oPaginate,f=e.oLanguage.oAria.paginate||{},g=0,h=function(t,n){var d,b,m,v,x=function(e){e.preventDefault(),a(e.currentTarget).hasClass("disabled")||c.page()==e.data.action||c.page(e.data.action).draw("page")};for(d=0,b=n.length;d<b;d++)if(v=n[d],a.isArray(v))h(t,v);else{switch(i="",l="",v){case"ellipsis":i="&#x2026;",l="disabled";break;case"first":i=u.sFirst,l=v+(r>0?"":" disabled");break;case"previous":i=u.sPrevious,l=v+(r>0?"":" disabled");break;case"next":i=u.sNext,l=v+(r<s-1?"":" disabled");break;case"last":i=u.sLast,l=v+(r<s-1?"":" disabled");break;default:i=v+1,l=r===v?"active":""}i&&(m=a("<li>",{class:p.sPageButton+" "+l,id:0===o&&"string"==typeof v?e.sTableId+"_"+v:null}).append(a("<a>",{href:"#","aria-controls":e.sTableId,"aria-label":f[v],"data-dt-idx":g,tabindex:e.iTabIndex}).html(i)).appendTo(t),e.oApi._fnBindAction(m,{action:v},x),g++)}};try{d=a(t).find(document.activeElement).data("dt-idx")}catch(a){}h(a("ul",a(t).empty().html('<div class="col-sm-10 col-xs-12"><ul class="pagination pull-right"/></div>')),n);var b=a("<input>",{class:"form-control",type:"number",min:1,max:s}).val(r+1).on("keyup",function(a){if(13==a.keyCode){var e=0|this.value.replace(/\s|\D/g,"");if(e){var t=c.page.info().pages;e=e>t?t:e,e--,c.page(e).draw(!1)}}}),m=a("<span />",{class:"input-group-addon","aria-controls":e.sTableId,tabindex:e.iTabIndex}).html(u.jump).on("click",function(){var a=0|b.val().replace(/\s|\D/g,"");if(a){var e=c.page.info().pages;a=a>e?e:a,a--,c.page(a).draw(!1)}});a(t).append(a("<div />",{class:"col-sm-2 pull-right input-group hidden-xs"}).append(b).append(m)),d&&a(t).find("[data-dt-idx="+d+"]").focus()},a.extend(a.fn.dataTable.ext.classes,{sWrapper:"dataTables_wrapper form-inline",sFilterInput:"form-control",sLengthSelect:"form-control",sProcessing:"dataTables_processing"}),e.make=function(){var o=e.getConfig(),n=e.getColumns(!0);e.datatable=t.DataTable({dom:"r<'row'<'#toolbar.col-sm-8 text-left'><'col-sm-4 search-filter text-right'f><'clearfix'>><'row'<'col-sm-4 hidden-xs'l><'col-sm-8 col-xs-12'p><'clearfix'>>t<'row'<'col-sm-4 hidden-xs'i><'col-sm-8 col-xs-12'p><'clearfix'>>",language:{lengthMenu:"_MENU_",zeroRecords:"\u6ca1\u6709\u8bb0\u5f55",search:'<div class="input-group">_INPUT_<span class="input-group-addon"><i class="fa fa-search"></i></span></div>',info:"<strong>_START_</strong>-<strong>_END_</strong> of <strong>_TOTAL_</strong>",infoEmpty:"<strong>0</strong>-<strong>0</strong> of <strong>0</strong>",infoFiltered:"(from <strong>_MAX_</strong>)",searchPlaceholder:"\u8f93\u5165\u5173\u952e\u5b57",paginate:{previous:'<i class="fa fa-backward"></i>',next:'<i class="fa fa-forward"></i>',first:'<i class="fa fa-step-backward"></i>',last:'<i class="fa fa-step-forward"></i>',jump:'<i class="fa fa-paper-plane-o"></i>'},aria:{paginate:{first:"\u9996\u9875",previous:"\u4e0a\u9875",next:"\u4e0b\u9875",last:"\u5c3e\u9875"}},processing:'<div class="mask"></div><div class="inner"><h3 class="text-light"><strong>Loading...</strong></h3><div class="preloader-spinner fa-spin"></div></div>'},column:{asSorting:["desc","asc"]},renderer:"bootstrap",ajax:{url:a.baseuri+o.namespace+"/"+o.name+"/data/json",timeout:2e4,type:"POST",data:function(e){console.log(e);for(var t={},o=0;o<e.order.length;++o){var n=e.order[o];if("undefined"!=typeof e.columns[n.column]&&e.columns[n.column].orderable){var r=e.columns[n.column].name?e.columns[n.column].name:e.columns[n.column].data;r&&(t[r]=n.dir)}}return a.extend(!0,{},{size:e.length,page:isNaN(e.start/e.length)?1:Math.ceil(e.start/e.length),q:{_all:e.search.value},o:t,f:window.location.query("f")})},dataSrc:function(e){return e&&"success"==e.result||"api"==e.result?(e.recordsTotal=e.data.recordsTotal,e.recordsFiltered=e.data.recordsFiltered,e.data.data.forEach(function(a,e){a.DT_RowId="line-"+(a.id?a.id:e)}),e.data.data):(a.showtips(e),[])}},serverSide:!0,deferRender:!0,columns:n,rowCallback:function(a,e,t){},createdRow:function(t,o,n){a.fn.tooltip&&a('[data-toggle="tooltip"], .enable-tooltip',t).tooltip({container:"body",animation:!1}),a.fn.popover&&a('[data-toggle="popover"], .enable-popover',t).popover({container:"body",animation:!0}),e.bindMethods(t)},drawCallback:function(a){e.setConfig(a)}})},e.bindMethods("body"),e.make(),a("#tools-contrainer").appendTo("#toolbar"),a("#reload").on("click",function(){e.datatable.ajax.reload(null,!1)}),a("thead th:eq(0) :checkbox",".table").on("click",function(e){var o=a(this).prop("checked");a(this).closest("table");e.stopPropagation(),a("tbody :checkbox:visible",t).each(function(){a(this).prop("checked",o).triggerHandler("click")})})})}(jQuery);
//# sourceMappingURL=table.min.js.map
