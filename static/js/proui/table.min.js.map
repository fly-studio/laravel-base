{"version":3,"sources":["table.js"],"names":["$","ready","method","config","$dt","bindMethods","obj","query","json","result","data","id","datatable","ajax","reload","forEach","fadeOut","this","remove","layout","modal","is","on","e","target","closest","trigger","$tr","checked","addClass","removeClass","getConfig","configs","r","i","length","bbq","getState","extend","displayStart","pageLength","setConfig","settings","_iDisplayStart","_iDisplayLength","search","oPreviousSearch","sSearch","order","aLastSort","v","push","col","dir","pushState","getColumns","removeIt","each","$t","render","template","compile","html","c","orderable","cellType","tagName","toLowerCase","className","contentPadding","defaultContent","name","orderData","orderDataType","orderSequence","type","full","d","searchable","visible","empty","fn","dataTable","ext","renderer","pageButton","bootstrap","host","idx","buttons","page","pages","btnDisplay","btnClass","activeEl","api","Api","classes","oClasses","lang","oLanguage","oPaginate","aria","oAria","paginate","counter","attach","container","ien","node","button","clickHandler","preventDefault","currentTarget","hasClass","action","draw","isArray","sFirst","sPrevious","sNext","sLast","class","sPageButton","sTableId","append","href","aria-controls","aria-label","data-dt-idx","tabindex","iTabIndex","appendTo","oApi","_fnBindAction","find","document","activeElement","inputPageJump","min","max","val","event","keyCode","curr","value","replace","info","btnPageJump","jump","focus","sWrapper","sFilterInput","sLengthSelect","sProcessing","make","columns","DataTable","dom","language","lengthMenu","zeroRecords","infoEmpty","infoFiltered","searchPlaceholder","previous","next","first","last","processing","column","asSorting","url","baseuri","namespace","timeout","filters","window","location","dataSrc","recordsTotal","recordsFiltered","k","DT_RowId","showtips","serverSide","deferRender","rowCallback","row","dataIndex","createdRow","tooltip","animation","popover","drawCallback","checkedStatus","prop","stopPropagation","triggerHandler","jQuery"],"mappings":"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","file":"table.min.js","sourcesContent":["(function($){\r\n$().ready(function(){\r\n\tvar method = {config: {}};\r\n\tvar $dt = $('#datatable');\r\n\r\n\tmethod.bindMethods = function(obj){\r\n\r\n\t\t$('a[method]:not([method=\"delete\"])', obj).query();\r\n\t\t$('a[method=\"delete\"]', obj).query(function(json){\r\n\t\t\tif ((json.result == 'success' || json.result == 'api') && json.data.id) {\r\n\t\t\t\tif (method.datatable)\r\n\t\t\t\t\tmethod.datatable.ajax.reload(null, false);\r\n\t\t\t\telse\r\n\t\t\t\t\tjson.data.id.forEach(function(id){\r\n\t\t\t\t\t\t$('#line-'+id).fadeOut(function(){\r\n\t\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlayout: 'topCenter',\r\n\t\t\tmodal: false,\r\n\t\t});\r\n\t\tif ($(obj).is('tr'))\r\n\t\t{\r\n\t\t\t$(obj).on('click', '*', function(e){\r\n\t\t\t\tif ($(e.target).is('a,button,:checkbox')) return;\r\n\t\t\t\t\r\n\t\t\t\t$('td:eq(0) :checkbox', $(this).closest('tr')).trigger('click');\r\n\t\t\t});\r\n\t\t\t$('td:eq(0) :checkbox', obj).on('click', function(e){\r\n\t\t\t\tvar $tr = $(this).closest('tr');\r\n\t\t\t\tif (this.checked) $tr.addClass('active'); else $tr.removeClass('active');\r\n\t\t\t});\r\n\t\t}\r\n\t\t\t\r\n\t};\r\n\r\n\tmethod.getConfig = function()\r\n\t{\r\n\t\tvar configs = ['name', 'namespace', 'displayStart', 'pageLength'];\r\n\t\tvar r = {};\r\n\t\tfor (var i = 0; i < configs.length; i++)\r\n\t\t\tr[ configs[i] ] = $dt.data( configs[i] ) || null;\r\n\t\tvar config = $.bbq.getState();\r\n\t\tif (config)\r\n\t\t\tr = $.extend(r, config);\r\n\t\tr.displayStart = ~~r.displayStart;\r\n\t\tr.pageLength = ~~r.pageLength;\r\n\t\t$dt.data(r); //read from hash and set to table's data\r\n\r\n\t\treturn r;\r\n\t};\r\n\r\n\tmethod.setConfig = function(settings){\r\n\t\tvar config = {\r\n\t\t\tdisplayStart: settings._iDisplayStart,\r\n\t\t\tpageLength: settings._iDisplayLength,\r\n\t\t\tsearch: {search: settings.oPreviousSearch.sSearch},\r\n\t\t\torder: []\r\n\t\t};\r\n\t\tsettings.aLastSort.forEach(function(v){\r\n\t\t\tconfig.order.push([v.col, v.dir]);\r\n\t\t});\r\n\t\t//$dt.data(config); //已经写到hash中了，没必要设置table's data\r\n\t\t$.bbq.pushState(config);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tmethod.getColumns = function(removeIt)\r\n\t{\r\n\t\tvar r = [];\r\n\t\t$('tbody td,tbody th', $dt).each(function(i, v){\r\n\t\t\tvar $t = $(this);\r\n\t\t\tvar render = template.compile($t.html());\r\n\r\n\t\t\tvar c = {\r\n\t\t\t\tdata: $t.data('from') || null,\r\n\t\t\t\torderable: $t.data('orderable') !== false,\r\n\t\t\t\tcellType: this.tagName.toLowerCase(),\r\n\t\t\t\tclassName: this.className,\r\n\t\t\t\tcontentPadding: $t.data('contentPadding') || null,\r\n\t\t\t\tdefaultContent: $t.data('defaultContent') || null,\r\n\t\t\t\tname: this.name || null,\r\n\t\t\t\torderData: $t.data('orderData'),\r\n\t\t\t\torderDataType: $t.data('orderDataType') || null,\r\n\t\t\t\torderSequence: $t.data('orderSequence') || [ 'asc', 'desc' ],\r\n\t\t\t\trender: function(data, type, full) {\r\n\t\t\t\t\tvar d = {data: data, type: type, full: full};\r\n\t\t\t\t\treturn render(d);\r\n\t\t\t\t},\r\n\t\t\t\tsearchable: $t.data('searchable') !== false,\r\n\t\t\t\t//type: $t.data('type') || null,\r\n\t\t\t\tvisible: $t.data('visible') !== false,\r\n\t\t\t\t//width: $t.data('width') || null\r\n\t\t\t};\r\n\t\t\tr.push(c);\r\n\t\t});\r\n\t\tif (removeIt === true) $('tbody', $dt).empty();\r\n\t\treturn r;\r\n\t};\r\n\t$.fn.dataTable.ext.renderer.pageButton.bootstrap = function ( settings, host, idx, buttons, page, pages ) {\r\n\t\tvar api     = new $.fn.dataTable.Api( settings );\r\n\t\tvar classes = settings.oClasses;\r\n\t\tvar lang    = settings.oLanguage.oPaginate;\r\n\t\tvar aria = settings.oLanguage.oAria.paginate || {};\r\n\t\tvar btnDisplay, btnClass, counter=0;\r\n\r\n\t\tvar attach = function( container, buttons ) {\r\n\t\t\tvar i, ien, node, button;\r\n\t\t\tvar clickHandler = function ( e ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif ( !$(e.currentTarget).hasClass('disabled') && api.page() != e.data.action ) {\r\n\t\t\t\t\tapi.page( e.data.action ).draw( 'page' );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\t\tbutton = buttons[i];\r\n\r\n\t\t\t\tif ( $.isArray( button ) ) {\r\n\t\t\t\t\tattach( container, button );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tbtnDisplay = '';\r\n\t\t\t\t\tbtnClass = '';\r\n\r\n\t\t\t\t\tswitch ( button ) {\r\n\t\t\t\t\t\tcase 'ellipsis':\r\n\t\t\t\t\t\t\tbtnDisplay = '&#x2026;';\r\n\t\t\t\t\t\t\tbtnClass = 'disabled';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'first':\r\n\t\t\t\t\t\t\tbtnDisplay = lang.sFirst;\r\n\t\t\t\t\t\t\tbtnClass = button + (page > 0 ?\r\n\t\t\t\t\t\t\t\t'' : ' disabled');\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'previous':\r\n\t\t\t\t\t\t\tbtnDisplay = lang.sPrevious;\r\n\t\t\t\t\t\t\tbtnClass = button + (page > 0 ?\r\n\t\t\t\t\t\t\t\t'' : ' disabled');\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'next':\r\n\t\t\t\t\t\t\tbtnDisplay = lang.sNext;\r\n\t\t\t\t\t\t\tbtnClass = button + (page < pages-1 ?\r\n\t\t\t\t\t\t\t\t'' : ' disabled');\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'last':\r\n\t\t\t\t\t\t\tbtnDisplay = lang.sLast;\r\n\t\t\t\t\t\t\tbtnClass = button + (page < pages-1 ?\r\n\t\t\t\t\t\t\t\t'' : ' disabled');\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbtnDisplay = button + 1;\r\n\t\t\t\t\t\t\tbtnClass = page === button ?\r\n\t\t\t\t\t\t\t\t'active' : '';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( btnDisplay ) {\r\n\t\t\t\t\t\tnode = $('<li>', {\r\n\t\t\t\t\t\t\t\t'class': classes.sPageButton+' '+btnClass,\r\n\t\t\t\t\t\t\t\t'id': idx === 0 && typeof button === 'string' ?\r\n\t\t\t\t\t\t\t\t\tsettings.sTableId +'_'+ button :\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t.append( $('<a>', {\r\n\t\t\t\t\t\t\t\t\t'href': '#',\r\n\t\t\t\t\t\t\t\t\t'aria-controls': settings.sTableId,\r\n\t\t\t\t\t\t\t\t\t'aria-label': aria[ button ],\r\n\t\t\t\t\t\t\t\t\t'data-dt-idx': counter,\r\n\t\t\t\t\t\t\t\t\t'tabindex': settings.iTabIndex\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t.html( btnDisplay )\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.appendTo( container );\r\n\r\n\t\t\t\t\t\tsettings.oApi._fnBindAction(\r\n\t\t\t\t\t\t\tnode, {action: button}, clickHandler\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// IE9 throws an 'unknown error' if document.activeElement is used\r\n\t\t// inside an iframe or frame. \r\n\t\tvar activeEl;\r\n\r\n\t\ttry {\r\n\t\t\t// Because this approach is destroying and recreating the paging\r\n\t\t\t// elements, focus is lost on the select button which is bad for\r\n\t\t\t// accessibility. So we want to restore focus once the draw has\r\n\t\t\t// completed\r\n\t\t\tactiveEl = $(host).find(document.activeElement).data('dt-idx');\r\n\t\t}\r\n\t\tcatch (e) {}\r\n\r\n\t\tattach(\r\n\t\t\t$('ul', $(host).empty().html('<div class=\"col-sm-10 col-xs-12\"><ul class=\"pagination pull-right\"/></div>')),\r\n\t\t\tbuttons\r\n\t\t);\r\n\t\t/*添加跳页功能*/\r\n\t\tvar inputPageJump = $('<input>', {\r\n\t\t\tclass: 'form-control',\r\n\t\t\ttype: \"number\",\r\n\t\t\tmin: 1,\r\n\t\t\tmax: pages\r\n\t\t}).val(page+1).on(\"keyup\", function(event){\r\n\t\t\tif (event.keyCode == 13) {\r\n\t\t\t\tvar curr = this.value.replace(/\\s|\\D/g, '') | 0;\r\n\t\t\t\tif (curr) {\r\n\t\t\t\t\tvar pages = api.page.info().pages;\r\n\t\t\t\t\tcurr = curr > pages ? pages : curr;\r\n\t\t\t\t\tcurr--;\r\n\t\t\t\t\tapi.page(curr).draw(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar btnPageJump = $('<span />', {\r\n\t\t\t'class': \"input-group-addon\",\r\n\t\t\t'aria-controls': settings.sTableId,\r\n\t\t\t'tabindex': settings.iTabIndex\r\n\t\t}).html(lang.jump).on(\"click\",function(){\r\n\t\t\tvar curr = inputPageJump.val().replace(/\\s|\\D/g, '') | 0;\r\n\t\t\tif (curr) {\r\n\t\t\t\tvar pages = api.page.info().pages;\r\n\t\t\t\tcurr = curr > pages ? pages : curr;\r\n\t\t\t\tcurr--;\r\n\t\t\t\tapi.page(curr).draw(false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(host).append($('<div />', {\r\n\t\t\t'class' : \"col-sm-2 pull-right input-group hidden-xs\"\r\n\t\t}).append(inputPageJump).append(btnPageJump));\r\n\r\n\t\tif ( activeEl ) {\r\n\t\t\t$(host).find( '[data-dt-idx='+activeEl+']' ).focus();\r\n\t\t}\r\n\t};\r\n\r\n\t$.extend($.fn.dataTable.ext.classes, {\r\n\t\tsWrapper: 'dataTables_wrapper form-inline',\r\n\t\tsFilterInput: 'form-control',\r\n\t\tsLengthSelect: 'form-control',\r\n\t\tsProcessing: 'dataTables_processing',\r\n\t});\r\n\t\r\n\tmethod.make = function(){\r\n\t\tvar config = method.getConfig();\r\n\t\tvar columns = method.getColumns(true);\r\n\t\tmethod.datatable = $dt.DataTable({\r\n\t\t\tdom: \"r\" +\r\n\t\t\t\t\"<'row'<'col-sm-4'l><'#toolbar.col-sm-4 text-center'><'col-sm-4 search-filter text-right'f><'clearfix'>>\" +\r\n\t\t\t\t\"<'row'<'col-sm-4 hidden-xs'i><'col-sm-8 col-xs-12'p><'clearfix'>>\" +\r\n\t\t\t\t\"t\" +\r\n\t\t\t\t\"<'row'<'col-sm-4 hidden-xs'i><'col-sm-8 col-xs-12'p><'clearfix'>>\",\r\n\t\t\tlanguage: {\r\n\t\t\t\tlengthMenu: '_MENU_',\r\n\t\t\t\tzeroRecords: '没有记录',\r\n\t\t\t\tsearch: '<div class=\"input-group\">_INPUT_<span class=\"input-group-addon\"><i class=\"fa fa-search\"></i></span></div>',\r\n\t\t\t\tinfo: '<strong>_START_</strong>-<strong>_END_</strong> of <strong>_TOTAL_</strong>',\r\n\t\t\t\tinfoEmpty: '<strong>0</strong>-<strong>0</strong> of <strong>0</strong>',\r\n\t\t\t\tinfoFiltered: '(from <strong>_MAX_</strong>)',\r\n\t\t\t\tsearchPlaceholder: '输入关键字',\r\n\t\t\t\tpaginate: {\r\n\t\t\t\t\tprevious: '<i class=\"fa fa-backward\"></i>',\r\n\t\t\t\t\tnext: '<i class=\"fa fa-forward\"></i>',\r\n\t\t\t\t\tfirst: '<i class=\"fa fa-step-backward\"></i>',\r\n\t\t\t\t\tlast: '<i class=\"fa fa-step-forward\"></i>',\r\n\t\t\t\t\tjump: '<i class=\"fa fa-paper-plane-o\"></i>'\r\n\t\t\t\t},\r\n\t\t\t\taria: {\r\n\t\t\t\t\tpaginate: {\r\n\t\t\t\t\t\tfirst: '首页',\r\n\t\t\t\t\t\tprevious: '上页',\r\n\t\t\t\t\t\tnext: '下页',\r\n\t\t\t\t\t\tlast: '尾页'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tprocessing: '<div class=\"mask themed-background\"></div><div class=\"inner\"><h3 class=\"text-light\"><strong>Loading..</strong></h3><div class=\"preloader-spinner fa-spin\"></div></div>'\r\n\t\t\t},\r\n\t\t\tcolumn: {\r\n\t\t\t\tasSorting: [ 'desc', 'asc' ]  //first sort desc, then asc\r\n\t\t\t},\r\n\t\t\trenderer: 'bootstrap',\r\n\r\n\t\t\tajax: {\r\n\t\t\t\turl: $.baseuri + config.namespace+'/'+config.name+'/data/json',\r\n\t\t\t\ttimeout: 20 * 1000,\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: function(d){\r\n\t\t\t\t\treturn $.extend({}, d, {\r\n\t\t\t\t\t\tfilters: window.location.query('filters')\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tdataSrc: function(json){\r\n\t\t\t\t\tif (json && json.result == 'success' || json.result == 'api') {\r\n\t\t\t\t\t\tjson.recordsTotal = json.data.recordsTotal;\r\n\t\t\t\t\t\tjson.recordsFiltered = json.data.recordsFiltered;\r\n\t\t\t\t\t\tjson.data.data.forEach(function(v, k){v.DT_RowId = 'line-' + (v.id ? v.id : k);});\r\n\t\t\t\t\t\treturn json.data.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t else \r\n\t\t\t\t\t\t$.showtips(json);\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tserverSide: true,\r\n\t\t\tdeferRender: true,\r\n\t\t\tcolumns: columns,\r\n\t\t\trowCallback: function( row, data, dataIndex ) {\r\n\t\t\t\t//call\r\n\t\t\t},\r\n\t\t\tcreatedRow: function( row, data, dataIndex ) {\r\n\t\t\t\t// Initialize Tooltips\r\n\t\t\t\tif ($.fn.tooltip) $('[data-toggle=\"tooltip\"], .enable-tooltip', row).tooltip({container: 'body', animation: false});\r\n\t\t\t\t// Initialize Popovers\r\n\t\t\t\tif ($.fn.popover) $('[data-toggle=\"popover\"], .enable-popover', row).popover({container: 'body', animation: true});\t\t\r\n\t\t\t\t//call\t\r\n\t\t\t\tmethod.bindMethods(row);\r\n\t\t\t},\r\n\t\t\tdrawCallback: function( settings ) {\r\n\t\t\t\tmethod.setConfig(settings);\r\n\t\t\t\t//call\r\n\t\t\t}/*,\r\n\t\t\tstateSave: false,\r\n\t\t\tstateDuration: -1*/\r\n\t\t});\r\n\t};\r\n\r\n\t//初始化\r\n\tmethod.bindMethods('body');\r\n\tmethod.make();\r\n\r\n\t$('#tools-contrainer').appendTo('#toolbar');\r\n\t$('#reload').on('click', function(){\r\n\t\tmethod.datatable.ajax.reload(null, false);\r\n\t});\r\n\t/* Select/Deselect all checkboxes in tables */\r\n\t$('thead th:eq(0) :checkbox', '.table').on('click', function(e) {\r\n\r\n\t\tvar checkedStatus   = $(this).prop('checked');\r\n\t\tvar table           = $(this).closest('table');\r\n\t\te.stopPropagation();\r\n\t\t//e.preventDefault();\r\n\t\t$('tbody :checkbox:visible', $dt).each(function() {\r\n\r\n\t\t\t$(this).prop('checked', checkedStatus).triggerHandler('click');\r\n\t\t});\r\n\r\n\t});\r\n});\r\n\t\r\n})(jQuery);"]}