{"version":3,"sources":["table.js"],"names":["$","ready","options_query","obj","query","json","result","data","id","datatable_config","datatable","ajax","reload","forEach","fadeOut","this","remove","layout","modal","call","document","body","click","e","checkedStatus","prop","table","closest","stopPropagation","each","jQuery","fn","dataTableExt","oApi","fnPagingInfo","iStart","_iDisplayStart","iEnd","fnDisplayEnd","iLength","_iDisplayLength","iTotal","fnRecordsTotal","iFilteredTotal","fnRecordsDisplay","iPage","Math","ceil","iTotalPages","extend","oPagination","bootstrap","fnInit","t","n","i","oLanguage","oPaginate","r","oInstance","preventDefault","parseInt","_fnPageChange","action","append","sFirst","sPrevious","sNext","sLast","o","on","slider","popover","html","title","content","placement","trigger","container","fnUpdate","a","s","l","c","aanFeatures","p","u","floor","iLen","length","$more","off","value","max","min","step","formatter","v","getValue","blur","hide","insertBefore","text","addClass","removeClass","dataTable","defaults","dom","pagingType","language","lengthMenu","search","info","infoEmpty","infoFiltered","paginate","previous","next","first","last","processing","column","asSorting","oStdClasses","sWrapper","sFilterInput","sLengthSelect","encode","settings","displayStart","pageLength","order","aLastSort","push","col","dir","bbq","pushState","decode","getState","DataTable","url","baseuri","namespace","name","timeout","type","d","filters","window","location","dataSrc","recordsTotal","recordsFiltered","k","DT_RowId","showtips","autoWidth","searching","deferRender","serverSide","columns","searchDelay","rowCallback","row","dataIndex","onDrawingRow","createdRow","tooltip","animation","onCreateRow","drawCallback","onDrawCallback","attr","appendTo"],"mappings":"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","file":"table.min.js","sourcesContent":["(function($){\r\n$().ready(function(){\r\n\tvar options_query = function(obj) {\r\n\t\t$('a[method=\"delete\"]', obj).query(function(json){\r\n\t\t\tif ((json.result == 'success' || json.result == 'api') && json.data.id) {\r\n\t\t\t\tif ($.datatable_config && $.datatable_config.datatable)\r\n\t\t\t\t\t$.datatable_config.datatable.ajax.reload(null, false);\r\n\t\t\t\telse\r\n\t\t\t\t\tjson.data.id.forEach(function(id){\r\n\t\t\t\t\t\t$('#line-'+id).fadeOut(function(){\r\n\t\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlayout: 'topCenter',\r\n\t\t\tmodal: false\r\n\t\t});\r\n\t\t$('a[method]:not([method=\"delete\"])', obj).query();\r\n\t};\r\n\toptions_query.call(this, document.body);\r\n\t\r\n\t /* Select/Deselect all checkboxes in tables */\r\n\t$('thead input:checkbox').click(function(e) {\r\n\t\tvar checkedStatus   = $(this).prop('checked');\r\n\t\tvar table           = $(this).closest('table');\r\n\t\te.stopPropagation();\r\n\t\t$('tbody input:checkbox:visible', table).each(function() {\r\n\t\t\t$(this).prop('checked', checkedStatus);\r\n\t\t});\r\n\t});\r\n\r\n\tif ($.datatable_config) {\r\n\t\t// Datatables Bootstrap Pagination Integration\r\n\t\tjQuery.fn.dataTableExt.oApi.fnPagingInfo = function(e) {\r\n\t\t\treturn {\r\n\t\t\t\tiStart: e._iDisplayStart,\r\n\t\t\t\tiEnd: e.fnDisplayEnd(),\r\n\t\t\t\tiLength: e._iDisplayLength,\r\n\t\t\t\tiTotal: e.fnRecordsTotal(),\r\n\t\t\t\tiFilteredTotal: e.fnRecordsDisplay(),\r\n\t\t\t\tiPage: Math.ceil(e._iDisplayStart / e._iDisplayLength),\r\n\t\t\t\tiTotalPages: Math.ceil(e.fnRecordsDisplay() / e._iDisplayLength)\r\n\t\t\t};\r\n\t\t};\r\n\t\tjQuery.extend(jQuery.fn.dataTableExt.oPagination, {\r\n\t\t\tbootstrap: {\r\n\t\t\t\tfnInit: function(e, t, n) {\r\n\t\t\t\t\tvar i = e.oLanguage.oPaginate,\r\n\t\t\t\t\tl = e.oInstance.fnPagingInfo(),\r\n\t\t\t\t\tr = function(t) {\r\n\t\t\t\t\t\tt.preventDefault();\r\n\t\t\t\t\t\te._iDisplayLength = parseInt(e._iDisplayLength, 10);\r\n\t\t\t\t\t\te._iDisplayStart = parseInt(e._iDisplayStart, 10);\r\n\t\t\t\t\t\tif (e.oApi._fnPageChange(e, t.data.action)) n(e);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjQuery(t).append('<ul class=\"pagination pagination-sm remove-margin\"><li class=\"first disabled\"><a href=\"javascript:void(0)\"><i class=\"glyphicon glyphicon-step-backward\"></i> ' + i.sFirst + '</a></li><li class=\"prev disabled\"><a href=\"javascript:void(0)\"><i class=\"glyphicon glyphicon-chevron-left\"></i> ' + i.sPrevious + '</a></li>' + '<li class=\"next disabled\"><a href=\"javascript:void(0)\">' + i.sNext + ' <i class=\"glyphicon glyphicon-chevron-right\"></i></a></li><li class=\"last disabled\"><a href=\"javascript:void(0)\">' + i.sLast + ' <i class=\"glyphicon glyphicon-step-forward\"></i></a></li>' + '<li class=\"more\"><a href=\"javascript:void(0)\"><i class=\"glyphicon glyphicon-option-horizontal\"></i></a></li>' + \"</ul>\");\r\n\t\t\t\t\tvar o = jQuery('a', t);\r\n\t\t\t\t\tjQuery(o[0]).on('click.DT', {\r\n\t\t\t\t\t\taction: 'first'\r\n\t\t\t\t\t},r);\r\n\t\t\t\t\tjQuery(o[1]).on('click.DT', {\r\n\t\t\t\t\t\taction: 'previous'\r\n\t\t\t\t\t},r);\r\n\t\t\t\t\tjQuery(o[2]).on('click.DT', {\r\n\t\t\t\t\t\taction: 'next'\r\n\t\t\t\t\t},r);\r\n\t\t\t\t\tjQuery(o[3]).on('click.DT', {\r\n\t\t\t\t\t\taction: 'last'\r\n\t\t\t\t\t},r);\r\n\t\t\t\t\tif (jQuery.fn.slider) jQuery(o[4]).popover({\r\n\t\t\t\t\t\thtml: true,\r\n\t\t\t\t\t\ttitle: '',\r\n\t\t\t\t\t\tcontent: '<input type=\"text\" id=\"datatable-paginate-slider\" class=\"form-control\" value=\"1\" data-slider-selection=\"after\" data-slider-tooltip=\"show\">',\r\n\t\t\t\t\t\tplacement: 'left',\r\n\t\t\t\t\t\ttrigger: 'focus',\r\n\t\t\t\t\t\tcontainer: t\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfnUpdate: function(e, t) {\r\n\t\t\t\t\tvar n, i, r, o, a, s = 5,\r\n\t\t\t\t\tl = e.oInstance.fnPagingInfo(),\r\n\t\t\t\t\tc = e.aanFeatures.p,\r\n\t\t\t\t\tu = Math.floor(s / 2);\r\n\t\t\t\t\tfor (l.iTotalPages < s ? (o = 1, a = l.iTotalPages) : l.iPage <= u ? (o = 1, a = s) : l.iPage >= l.iTotalPages - u ? (o = l.iTotalPages - s + 1, a = l.iTotalPages) : (o = l.iPage - u + 1, a = o + s - 1), n = 0, iLen = c.length; iLen > n; n++) {\r\n\t\t\t\t\t\tjQuery('li:not(.first,.prev,.next,.last,.more)', c[n]).remove();\r\n\t\t\t\t\t\tvar $more = jQuery('a:eq(4)', c[n]);\r\n\t\t\t\t\t\tif (l.iTotalPages > 1)\r\n\t\t\t\t\t\t\t$more.off('shown.bs.popover').on('shown.bs.popover', function() {\r\n\t\t\t\t\t\t\t\tjQuery('#datatable-paginate-slider').slider({\r\n\t\t\t\t\t\t\t\t\tvalue: parseInt(l.iPage) + 1,\r\n\t\t\t\t\t\t\t\t\tmax: parseInt(l.iTotalPages),\r\n\t\t\t\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\t\t\t\tstep: 1,\r\n\t\t\t\t\t\t\t\t\tformatter: function(v){return 'Page: ' + v;}\r\n\t\t\t\t\t\t\t\t}).on('slideStop', function(){\r\n\t\t\t\t\t\t\t\t\tvar p = parseInt(jQuery(this).data('slider').getValue());\r\n\t\t\t\t\t\t\t\t\te._iDisplayStart = (parseInt(p, 10) - 1) * l.iLength;\r\n\t\t\t\t\t\t\t\t\tt(e);\r\n\t\t\t\t\t\t\t\t\t$more.popover('hide').blur();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t$more.hide();\r\n\t\t\t\t\t\tfor (i = o; a >= i; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tr = i === l.iPage + 1 ? 'class=\"active\"': '';\r\n\t\t\t\t\t\t\tjQuery('<li ' + r + '><a href=\"javascript:void(0)\">' + i + \"</a></li>\").insertBefore(jQuery('li.next', c[n])[0]).on('click', function(n) {\r\n\t\t\t\t\t\t\t\tn.preventDefault();\r\n\t\t\t\t\t\t\t\te._iDisplayStart = (parseInt(jQuery(\"a\", this).text(), 10) - 1) * l.iLength;\r\n\t\t\t\t\t\t\t\tt(e);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (0 === l.iPage) //第一页\r\n\t\t\t\t\t\t\tjQuery('li.first,li.prev', c[n]).addClass('disabled');\r\n\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\tjQuery('li.first,li.prev', c[n]).removeClass('disabled');\r\n\t\t\t\t\t\tif (l.iPage === l.iTotalPages - 1 || 0 === l.iTotalPages) //尾页\r\n\t\t\t\t\t\t\tjQuery('li.last,li.next', c[n]).addClass('disabled');\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tjQuery('li.last,li.next', c[n]).removeClass('disabled');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t$.extend(true, $.fn.dataTable.defaults, {\r\n\t\t\t'dom': \"<'row'<'col-sm-6 col-xs-5'l><'col-sm-6 col-xs-7 search-filter text-right'f><'clearfix'>r>t<'row'<'col-sm-5 hidden-xs'i><'col-sm-7 col-xs-12 clearfix'p>>\",\r\n\t\t\t'pagingType': 'bootstrap',\r\n\t\t\t'language': {\r\n\t\t\t\t'lengthMenu': '_MENU_',\r\n\t\t\t\t'search': '<div class=\"input-group\">_INPUT_<span class=\"input-group-addon\"><i class=\"fa fa-search\"></i></span></div>',\r\n\t\t\t\t'info': '<strong>_START_</strong>-<strong>_END_</strong> of <strong>_TOTAL_</strong>',\r\n\t\t\t\t'infoEmpty': '<strong>0</strong>-<strong>0</strong> of <strong>0</strong>',\r\n\t\t\t\t'infoFiltered': '(from <strong>_MAX_</strong>)',\r\n\t\t\t\t'paginate': {\r\n\t\t\t\t\t'previous': '',\r\n\t\t\t\t\t'next': '',\r\n\t\t\t\t\t'first': '',\r\n\t\t\t\t\t'last': ''\r\n\t\t\t\t},\r\n\t\t\t\t'processing': '<div class=\"alert text-center\"><i class=\"gi gi-refresh\"></i> Loading...</div>'\r\n\t\t\t},\r\n\t\t\t'column': {\r\n\t\t\t\t'asSorting': [ 'desc', 'asc' ]  //first sort desc, then asc\r\n\t\t\t}\r\n\t\t});\r\n\t\t$.extend($.fn.dataTableExt.oStdClasses, {\r\n\t\t\t'sWrapper': 'dataTables_wrapper form-inline',\r\n\t\t\t'sFilterInput': 'form-control',\r\n\t\t\t'sLengthSelect': 'form-control'\r\n\t\t});\r\n\r\n\t\t$.datatable_config.encode = function(settings){\r\n\t\t\tvar json = {\r\n\t\t\t\tdisplayStart: settings._iDisplayStart,\r\n\t\t\t\tpageLength: settings._iDisplayLength,\r\n\t\t\t\torder: []\r\n\t\t\t};\r\n\t\t\tsettings.aLastSort.forEach(function(v){\r\n\t\t\t\tjson.order.push([v.col, v.dir]);\r\n\t\t\t});\r\n\t\t\t$.bbq.pushState(json);\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t$.datatable_config.decode = function(){\r\n\t\t\tvar json = $.bbq.getState();\r\n\t\t\tif (json)\t\t\t\r\n\t\t\t\t$.datatable_config = $.extend($.datatable_config, json);\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t$.datatable_config.decode();\r\n\r\n\t\t$.datatable_config.datatable = $('#datatable').DataTable({\r\n\t\t\t'ajax': {\r\n\t\t\t\turl: $.baseuri + $.datatable_config.namespace+'/'+$.datatable_config.name+'/data/json',\r\n\t\t\t\ttimeout: 20 * 1000,\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: function(d){\r\n\t\t\t\t\treturn $.extend({}, d, {\r\n\t\t\t\t\t\tfilters: window.location.query('filters')\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tdataSrc: function(json){\r\n\t\t\t\t\tif (json && json.result == 'success' || json.result == 'api') {\r\n\t\t\t\t\t\tjson.recordsTotal = json.data.recordsTotal;\r\n\t\t\t\t\t\tjson.recordsFiltered = json.data.recordsFiltered;\r\n\t\t\t\t\t\tjson.data.data.forEach(function(v, k){v.DT_RowId = 'line-' + (v.id ? v.id : k);});\r\n\t\t\t\t\t\treturn json.data.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t else \r\n\t\t\t\t\t\t$.showtips(json);\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'autoWidth': false,\r\n\t\t\t'searching': false,\r\n\t\t\t'processing': true,\r\n\t\t\t'deferRender': true, //延时绘制\r\n\t\t\t'serverSide': true, //服务器端\r\n\t\t\t'displayStart': parseInt($.datatable_config.displayStart, 10),\r\n\t\t\t'pageLength': parseInt($.datatable_config.pageLength, 10),\r\n\t\t\t'order': $.datatable_config.order,\r\n\t\t\t'columns': $.datatable_config.columns,\r\n\t\t\t'searchDelay': parseInt($.datatable_config.searchDelay, 10),\r\n\t\t\t'rowCallback': function( row, data, dataIndex ) {\r\n\t\t\t\tif ($.datatable_config.onDrawingRow) $.datatable_config.onDrawingRow.call(this, row, data, dataIndex);\r\n\t\t\t},\r\n\t\t\t'createdRow': function( row, data, dataIndex ) {\r\n\t\t\t\t//bind option's event\r\n\t\t\t\toptions_query.call(this, row);\r\n\t\t\t\t// Initialize Tooltips\r\n\t\t\t\tif ($.fn.tooltip) $('[data-toggle=\"tooltip\"], .enable-tooltip', row).tooltip({container: 'body', animation: false});\r\n\t\t\t\t// Initialize Popovers\r\n\t\t\t\tif ($.fn.popover) $('[data-toggle=\"popover\"], .enable-popover').popover({container: 'body', animation: true});\r\n\t\t\t\t\r\n\t\t\t\tif ($.datatable_config.onCreateRow) $.datatable_config.onCreateRow.call(this, row, data, dataIndex);\r\n\t\t\t},\r\n\t\t\t'drawCallback': function( settings ) {\r\n\t\t\t\t$.datatable_config.encode(settings);\r\n\t\t\t\tif ($.datatable_config.onDrawCallback) $.datatable_config.onDrawCallback.call(this, settings);\r\n\t\t\t}/*,\r\n\t\t\t'stateSave': true,\r\n\t\t\t'stateDuration': -1*/\r\n\t\t});\r\n\t\t$('.dataTables_filter input', $.datatable_config.datatable).attr('placeholder', '检索ID');\r\n\t\t$('<a href=\"javascript:void(0);\" class=\"btn btn-link\"><i class=\"glyphicon glyphicon-refresh\"></i> 重新加载</a>').appendTo('.search-filter').on('click', function(){\r\n\t\t\t$.datatable_config.datatable.ajax.reload(null, false);\r\n\t\t});\r\n\t}\r\n});\r\n\t\r\n})(jQuery);"]}