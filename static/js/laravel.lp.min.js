/*! laravel.lp.js 2017-02-17 22:58:57*/
var LP={},QUERY_LANGUAGE={error:"\u9519\u8bef",reload:"\u91cd\u65b0\u8f7d\u5165",redirect:"\u9875\u9762\u8df3\u8f6c",unselected:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879\uff01",network_timeout:"\u7f51\u7edc\u6545\u969c\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u540e\u91cd\u8bd5\uff01",parser_error:"\u6570\u636e\u89e3\u6790\u5931\u8d25\uff0c\u5237\u65b0\u91cd\u8bd5\u4e0b\uff1f",server_error:"\u670d\u52a1\u5668\u53ef\u80fd\u51fa\u73b0\u4e86\u70b9\u95ee\u9898\uff0c\u5237\u65b0\u9875\u9762\u91cd\u8bd5\u4e0b\uff1f",encrypt_key:"\u6570\u636e\u5df2\u7ecf\u52a0\u5bc6\uff0c\u4f46\u672a\u4f20\u9012\u6b63\u786e\u7684\u516c\u94a5\u3002",encrypt_js:"\u6570\u636e\u5df2\u7ecf\u52a0\u5bc6\uff0c\u4f46\u9875\u9762\u672a\u52a0\u8f7d\u89e3\u5bc6JS\u3002",encrypt_string:"\u6570\u636e\u5df2\u7ecf\u52a0\u5bc6\uff0c\u4f46\u5bc6\u6587\u89e3\u5bc6\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u3002",encrypt_unserialize:"\u6570\u636e\u5df2\u7ecf\u52a0\u5bc6\uff0c\u4f46\u89e3\u5bc6\u540e\u53cd\u5e8f\u5217\u5316\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u3002"};!function(){var e=document.currentScript;if(!e){var t=document.getElementsByTagName("script");e=t[t.length-1]}window.baseuri=e.src.toString().match(/[^\/:](\/.*)static\/js\/laravel\.lp(\.min)?\.js/i)?e.src.toString().match(/[^\/:](\/.*)static\/js\/laravel\.lp(\.min)?\.js/i)[1]:e.src.toString().replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")+"/",window.baseuri||(window.baseuri="/"),LP.baseuri=window.baseuri}(),function(){if("undefined"!=typeof JSEncrypt&&window.sessionStorage){var e=function(){var e=window.sessionStorage.getItem("l+rsa");if(e&&(e=JSON.parse(e)),!e){var t=new JSEncrypt({default_key_size:1024}),r=t.getKey();e={private:r.getPrivateKey(),public:r.getPublicKey()},window.sessionStorage.setItem("l+rsa",JSON.stringify(e))}return e},t=function(){this.rsa=e(),this.encrypt=function(e){var t=new JSEncrypt;return t.setKey(this.rsa.public),t.encrypt(e)},this.decrypt=function(e){var t=new JSEncrypt;return t.setKey(this.rsa.private),t.decrypt(e)}};LP.ssl=new t}}(jQuery),function(e){LP.csrf=e('meta[name="csrf-token"]').attr("content");var t={};LP.csrf&&(t["X-CSRF-TOKEN"]=LP.csrf),LP.ssl&&(t["X-RSA"]=encodeURIComponent(LP.ssl.rsa.public)),e.ajaxSetup({headers:t,dataFilter:function(t,r){var A=function(e){var t={};return t.result="error",t.message={title:QUERY_LANGUAGE.error,content:e},JSON.stringify(t)};if("json"==r.toLowerCase()){var n=e.parseJSON(t);if("undefined"!=typeof n&&"undefined"!=typeof n.result&&"api"==n.result&&"string"==typeof n.encrypted){var a,s,i;if("undefined"==typeof LP.ssl)return A(n.key?QUERY_LANGUAGE.encrypt_js:QUERY_LANGUAGE.encrypt_key);try{a=LP.ssl.decrypt(n.encrypted)}catch(e){return console.log(e.stack),A(QUERY_LANGUAGE.encrypt_key+e.message)}i=n.data;try{var o=base64js.toByteArray(i);s=JSON.parse(aesjs.util.convertBytesToString(o))}catch(e){return console.log(e.stack),A(QUERY_LANGUAGE.encrypt_string+e.message)}try{var c=base64js.toByteArray(a),u=base64js.toByteArray(s.iv),l=base64js.toByteArray(s.value),p=new aesjs.ModeOfOperation.cbc(c,u),d=p.decrypt(l),g=aesjs.util.convertBytesToString(d);n.data=unserialize(g),delete n.key}catch(e){return console.log(e.stack),A(QUERY_LANGUAGE.encrypt_unserialize+e.message)}}delete n.encrypted,t=JSON.stringify(n),"undefined"!=typeof n.debug&&n.debug&&console.log(n)}return t}}),LP.query=function(t,r,A){var n=this,a={},s=A,i=jQuery.Deferred();return A&&A instanceof String&&(s=e.deparam(A)),s&&s._method&&(t=s._method,a["X-HTTP-Method-Override"]=t),s&&s._token&&(a["X-CSRF-TOKEN"]=s._token),e.ajax({url:r,data:s?s:null,async:!0,cache:!1,type:t.toUpperCase(),headers:a,timeout:2e4,dataType:/[\?&](jsonp|callback)=\?/i.test(r)?"jsonp":"json",success:function(e,t,r){var A=arguments;"undefined"==typeof e||"undefined"==typeof e.result||"success"!=e.result&&"api"!=e.result?i.reject.apply(n,A):i.resolve.apply(n,A)},error:function(e,t,r){var A=arguments;i.reject.apply(n,A)}}),i.promise()},e.each(["get","post","head","patch","put","delete"],function(t,r){LP[r]=LP[r.toUpperCase()]=function(t,A,n){var a=this,s=LP.query.call(a,r,t,A);return n&&e.isFunction(n)&&s.done(function(){var e=arguments;n.apply(a,e)}),s}}),LP.tip=function(t,r,A,n){if("undefined"!=typeof r&&"object"==typeof A)switch("string"==typeof r&&(r={content:r}),"undefined"!=typeof e.lptip_interface?e.lptip_interface(t,r,A,n):alert(r.content.noHTML()),A.type){case"redirect":setTimeout(function(){self.location.href=A.url},A.timeout);break;case"refresh":setTimeout(function(){self.location.reload()},A.timeout);break;case"back":case"toast":}},LP.queryTip=function(t,r,A,n){n="undefined"==typeof n?{}:n;var a=this,s=LP.query.call(a,t,r,A);return n!==!1&&s.done(function(e){LP.tip.call(a,e.result,e.message,e.tipType,n)}).fail(function(t,r){if("object"==typeof t&&"undefined"!=typeof t.result){var A=t;LP.tip.call(a,A.result,A.message,A.tipType,n)}else switch(r){case"timeout":e.toast(QUERY_LANGUAGE.network_timeout);break;case"error":break;case"notmodified":break;case"parsererror":e.toast(QUERY_LANGUAGE.parser_error);break;default:e.toast(QUERY_LANGUAGE.server_error)}}),s},e.fn.extend({query:function(t,r){return this.each(function(){var A=e(this),n=A.is("form"),a=A.data("lp-query");if(a&&A.off(n?"submit":"click",a),"destroy"!=t){var s=n?A.data("validator"):null;s&&(s.settings.submitHandler=function(e,t){}),a=function(a){var i=A.attr("selector");if(A.is(".disabled,[disabled]"))return!1;var o=n?A.add(i):e(i);if(s&&!e.isEmptyObject(s.invalid))return!1;if((i||n)&&o.serializeArray().length<=0)return e.toast(QUERY_LANGUAGE.unselected),!1;var c=A.attr(n?"action":"href"),u=A.attr("method"),l=A.attr("confirm"),p=function(){var a=n?e(":submit,:image",A):A;return a=a.filter(":not(.disabled,[disabled])"),a.prop("disabled",!0).attr("disabled","disabled").each(function(){var t=e(this),r=t.offset();show_loading&&e('<div style="position:absolute;left:'+(r.left+t.width())+"px;top:"+(r.top-16)+'px;height:16px;width:16px;display:block;z-index:99999" class="query-loading"><img src="data:image/gif;base64,R0lGODlhEAAQAPYAAP///z/g/975/q7x/ofr/m/n/nLo/pHs/rjz/uT5/rrz/lrk/l3k/mPl/mfm/m3n/o7s/sr1/lTj/pTt/vD7/vH8/tD2/qbw/nvp/oXr/s32/tv4/mrm/k/i/qjw/r70/oTq/pzu/uj6/qPv/knh/o3s/rTy/ovs/sf1/nPo/kbh/sP0/q/x/lHi/kPg/u37/vb8/pnu/qLv/vf9/qDv/r3z/vr9/vz9/s/2/tb3/vn9/t/5/sH0/vP8/tz4/ur6/uX6/tn4/tP3/sz2/uf6/uH5/vT8/uL5/pru/sb1/sT1/njo/nzp/oLq/ojr/nDn/mzn/tL3/pft/mTl/u77/l7k/qnw/oHq/mDl/lXj/rfy/nnp/kzi/qXw/orr/mbm/tX3/tj4/uv7/sn1/p3u/qzx/rXy/n/q/qvx/nbo/nXo/ljk/rvz/kvh/kjh/sD0/kLg/rLy/lvk/k7i/mnm/pbt/mHl/kXg/pPt/lfj/n7p/pDs/p/v/gAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAHjYAAgoOEhYUbIykthoUIHCQqLoI2OjeFCgsdJSsvgjcwPTaDAgYSHoY2FBSWAAMLE4wAPT89ggQMEbEzQD+CBQ0UsQA7RYIGDhWxN0E+ggcPFrEUQjuCCAYXsT5DRIIJEBgfhjsrFkaDERkgJhswMwk4CDzdhBohJwcxNB4sPAmMIlCwkOGhRo5gwhIGAgAh+QQACgABACwAAAAAEAAQAAAHjIAAgoOEhYU7A1dYDFtdG4YAPBhVC1ktXCRfJoVKT1NIERRUSl4qXIRHBFCbhTKFCgYjkII3g0hLUbMAOjaCBEw9ukZGgidNxLMUFYIXTkGzOmLLAEkQCLNUQMEAPxdSGoYvAkS9gjkyNEkJOjovRWAb04NBJlYsWh9KQ2FUkFQ5SWqsEJIAhq6DAAIBACH5BAAKAAIALAAAAAAQABAAAAeJgACCg4SFhQkKE2kGXiwChgBDB0sGDw4NDGpshTheZ2hRFRVDUmsMCIMiZE48hmgtUBuCYxBmkAAQbV2CLBM+t0puaoIySDC3VC4tgh40M7eFNRdH0IRgZUO3NjqDFB9mv4U6Pc+DRzUfQVQ3NzAULxU2hUBDKENCQTtAL9yGRgkbcvggEq9atUAAIfkEAAoAAwAsAAAAABAAEAAAB4+AAIKDhIWFPygeEE4hbEeGADkXBycZZ1tqTkqFQSNIbBtGPUJdD088g1QmMjiGZl9MO4I5ViiQAEgMA4JKLAm3EWtXgmxmOrcUElWCb2zHkFQdcoIWPGK3Sm1LgkcoPrdOKiOCRmA4IpBwDUGDL2A5IjCCN/QAcYUURQIJIlQ9MzZu6aAgRgwFGAFvKRwUCAAh+QQACgAEACwAAAAAEAAQAAAHjIAAgoOEhYUUYW9lHiYRP4YACStxZRc0SBMyFoVEPAoWQDMzAgolEBqDRjg8O4ZKIBNAgkBjG5AAZVtsgj44VLdCanWCYUI3txUPS7xBx5AVDgazAjC3Q3ZeghUJv5B1cgOCNmI/1YUeWSkCgzNUFDODKydzCwqFNkYwOoIubnQIt244MzDC1q2DggIBACH5BAAKAAUALAAAAAAQABAAAAeJgACCg4SFhTBAOSgrEUEUhgBUQThjSh8IcQo+hRUbYEdUNjoiGlZWQYM2QD4vhkI0ZWKCPQmtkG9SEYJURDOQAD4HaLuyv0ZeB4IVj8ZNJ4IwRje/QkxkgjYz05BdamyDN9uFJg9OR4YEK1RUYzFTT0qGdnduXC1Zchg8kEEjaQsMzpTZ8avgoEAAIfkEAAoABgAsAAAAABAAEAAAB4iAAIKDhIWFNz0/Oz47IjCGADpURAkCQUI4USKFNhUvFTMANxU7KElAhDA9OoZHH0oVgjczrJBRZkGyNpCCRCw8vIUzHmXBhDM0HoIGLsCQAjEmgjIqXrxaBxGCGw5cF4Y8TnybglprLXhjFBUWVnpeOIUIT3lydg4PantDz2UZDwYOIEhgzFggACH5BAAKAAcALAAAAAAQABAAAAeLgACCg4SFhjc6RhUVRjaGgzYzRhRiREQ9hSaGOhRFOxSDQQ0uj1RBPjOCIypOjwAJFkSCSyQrrhRDOYILXFSuNkpjggwtvo86H7YAZ1korkRaEYJlC3WuESxBggJLWHGGFhcIxgBvUHQyUT1GQWwhFxuFKyBPakxNXgceYY9HCDEZTlxA8cOVwUGBAAA7AAAAAAAAAAAA"</div>').appendTo("body")}),LP.queryTip.call(A,u,c,o.serializeArray(),r).done(function(r){"undefined"!=typeof t&&e.isFunction(t)&&t.call(A,r)}).always(function(){e(".query-loading").remove(),a.prop("disabled",!1).removeAttr("disabled")})};return l?(l=l.replace("%L",o.serializeArray().length),e.confirm(l,p)):p.call(this),a.stopImmediatePropagation(),!1},A.on(n?"submit":"click",a).data({"lp-query":a})}})}}),e.baseuri=LP.baseuri,e.LP=LP}(jQuery);
//# sourceMappingURL=laravel.lp.min.js.map
