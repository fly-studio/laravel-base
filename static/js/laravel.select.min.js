!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=11)}({11:function(t,e,a){t.exports=a(3)},3:function(t,e,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e={cacheData:{}};e.getData=function(a,n){var r=JSON.stringify({url:a,params:n}),l=jQuery.Deferred();return void 0!==e.cacheData[r]?l.resolve(e.cacheData[r]):LP.post(a,t.extend(!0,{},n,{of:"json"})).done(function(t,a,n){var o=t.data.data;e.cacheData[r]=o,l.resolve(e.cacheData[r])}).fail(function(){var t=arguments;l.reject.apply(l,t)}),l.promise()},e.replaceData=function(t,e){return e.replace(/\{\{([\w\.]+)\}\}/g,function(e,a){for(var n=a.split("."),r=t,l=0;l<n.length;++l){var o=n[l];if(void 0===r[o])return null;r=r[o]}return r})},e.format=function(t,a,r,l,o){for(var s=[],i=0;i<t.length;++i){var c={id:a?e.replaceData(t[i],a):t[i].id,text:l?e.replaceData(t[i],l):t[i].text,selection:r?e.replaceData(t[i],r):t[i].selection,pid:o?e.replaceData(t[i],o):t[i].pid};"object"==n(t[i].children)&&void 0!==t[i].children.length&&(c.children=e.format(t[i].children,a,r,l,o)),s.push(c)}return s},e.recursive=function(t,a){a=void 0===a?"":a;for(var n=[],r=0;r<t.length;++r){var l=t[r],o="treeline ";0!==r||a?r==t.length-1?o+="bottom-":o+="center-":o+="top-",o+=l.children?"open":"line";var s={id:l.id,selection:l.selection,text:a+'<span class="'+o+'"></span>'+l.text};if(n.push(s),l.children)for(var i=e.recursive(l.children,a+(r==t.length-1?'<span class="treeline blank"></span>':'<span class="treeline blank-line"></span>')),c=0;c<i.length;++c)n.push(i[c])}return n},t.fn.extend({selectModel:function(a){return"destroy"==a?this.select2("destroy"):"open"==a?this.select2("open"):"close"==a?this.select2("close"):this.each(function(){var n=t(this),r=n.data("id"),l=n.data("text"),o=n.data("selection")?n.data("selection"):l,s=n.data("params"),i=n.attr("value")?n.attr("value").split(","):n.val(),c=LP.baseuri+n.data("model")+"/data";s=t.extend(!0,{},{all:"true"},s),e.getData(c,s).done(function(s){var c=e.format(s,r,o,l);n.select2(t.extend(!0,{},{language:"zh-CN",data:c,allowClear:!0},a)),n.val(i||null).trigger("change")})})},treeModel:function(a){return"destroy"==a?this.select2("destroy"):"open"==a?this.select2("open"):"close"==a?this.select2("close"):this.each(function(){var n=t(this),r=n.data("id"),l=n.data("pid"),o=n.data("text"),s=n.data("selection")?n.data("selection"):o,i=n.data("params"),c=n.attr("value")?n.attr("value").split(","):n.val(),d=LP.baseuri+n.data("model")+"/data";i=t.extend(!0,{},{all:"true",tree:"true"},i),e.getData(d,i).done(function(i){var d=e.format(i,r,s,o,l);d=e.recursive(d),n.select2(t.extend(!0,{},{language:"zh-CN",data:d,allowClear:!0,templateResult:function(e){return t("<div>"+e.text+"</div>")},templateSelection:function(t){return t.selection}},a)),n.val(c||null).trigger("change")})})},suggestModel:function(a){return"destroy"==a?this.select2("destroy"):"open"==a?this.select2("open"):"close"==a?this.select2("close"):this.each(function(){var n=t(this),r=n.data("id"),l=n.data("text"),o=n.data("selection")?n.data("selection"):l,s=n.data("term")?n.data("term"):null,i=n.data("q")?n.data("q"):null,c=n.attr("value")?n.attr("value").split(","):n.val(),d=LP.baseuri+n.data("model")+"/data",u={language:"zh-CN",ajax:{delay:500,transport:function(a,c,u){var f=n.data("params"),p={page:a.data.page,f:{},q:{}};s&&(p.f[s]={like:a.data.term}),i&&(p.q[i]=a.data.q),e.getData(d,t.extend(!0,{},p,f)).done(function(t){var a=e.format(t,r,o,l);c(a)})},processResults:function(t,e){return{results:t}}},escapeMarkup:function(t){return t},minimumInputLength:2,allowClear:!0,templateResult:function(t){return t.text},templateSelection:function(t){return t.selection||t.text}};if(c){var f=n.data("params");e.getData(d,t.extend(!0,{},f,{f:{id:{in:c}}})).done(function(s){var i=e.format(s,r,o,l);n.select2(t.extend(!0,{},u,a,{data:i}))})}else n.select2(t.extend(!0,{},u,a))})},tagsModel:function(a){return"destroy"==a?this.select2("destroy"):"open"==a?this.select2("open"):"close"==a?this.select2("close"):this.each(function(){var n=t(this),r=n.data("term")?n.data("term"):null,l=n.data("q")?n.data("q"):null;r||l||(r="keywords");var o=n.data("id")?n.data("id"):"{{keywords}}",s=n.data("text")?n.data("text"):'{{keywords}} <span class="text-muted">({{count}}\u6b21\u4f7f\u7528)</span>',i=n.data("selection")?n.data("selection"):"{{keywords}}",c=n.attr("value")?n.attr("value").split(","):n.val(),d=LP.baseuri+(n.data("model")?n.data("model"):"admin/tag")+"/data",u={language:"zh-CN",ajax:{delay:500,transport:function(a,c,u){var f=n.data("params"),p={page:a.data.page,f:{},q:{}};r&&(p.f[r]={like:a.data.term}),l&&(p.q[l]=a.data.q),e.getData(d,t.extend(!0,{},p,f)).done(function(t){var a=e.format(t,o,i,s);c(a)})},processResults:function(t,e){return{results:t}}},escapeMarkup:function(t){return t},minimumInputLength:1,templateResult:function(t){return t.text},templateSelection:function(t){return t.selection||t.text},createTag:function(e){var a=t.trim(e.term);return""===a?null:{id:a,selection:a,text:a+' <span style="color:#f5f5f5">(\u521b\u5efa)</span>',newTag:!0}}};if(c){var f=n.data("params"),p={f:{id:{in:c}},q:{}};e.getData(d,t.extend(!0,{},p,f)).done(function(r){var l=e.format(r,o,i,s);n.select2(t.extend(!0,{},u,a,{data:l}))})}else n.select2(t.extend(!0,{},u,a))})}}),t().ready(function(){t(".select-model").selectModel(),t(".tree-model").treeModel(),t(".suggest-model").suggestModel(),t(".tags-model").tagsModel()})}(jQuery)}});