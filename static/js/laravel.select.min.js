/*! laravel.select.js 2016-11-07 23:50:41*/
!function(t){t().ready(function(){var e=function(t,e){return e.replace(/\{([\w]+)\}/g,function(e,a){return t[a]})},a=function(t,n,r){for(var s=[],l=0;l<t.length;++l){var u={id:n?e(t[l],n):t[l].id,text:r?e(t[l],r):t[l].text};"object"==typeof t[l].children&&"undefined"!=typeof t[l].children.length&&(u.children=a(t[l].children,n,r)),s.push(u)}return s};t(".select-model").each(function(){var e=t(this),n=e.data("id"),r=e.data("text"),s=e.data("params"),l=e.attr("value");t.POST(t.baseuri+e.data("model")+"/data/json",t.extend({},{all:"true"},s),function(t){var s=[];if("success"==t.result||"api"==t.result){var u=t.data.data;s=a(u,n,r)}e.select2({language:"zh-CN",data:s,allowClear:!0}),e.val(l?l.split(","):null).trigger("change")},!1)}),t(".suggest-model").each(function(){var a=t(this),n=a.data("id"),r=a.data("text"),s=a.data("selection")?a.data("selection"):r,l=a.data("term"),u=a.data("filters"),i=a.attr("value"),c={language:"zh-CN",ajax:{url:t.baseuri+a.data("model")+"/data/json",dataType:"json",type:"post",delay:250,data:function(e){var a={page:e.page,_token:t.crsf,filters:{}};return a.filters[l]={like:e.term},a.filters=t.extend({},a.filters,u),a},processResults:function(t,a){if("success"!=t.result&&"api"!=t.result)return{result:[]};for(var l=[],u=t.data.data,i=0;i<u.length;++i)l.push({id:n?e(u[i],n):u[i].id,text:r?e(u[i],r):u[i].text,selection:s?e(u[i],s):u[i].selection});return{results:l}},cache:!0},escapeMarkup:function(t){return t},minimumInputLength:1,allowClear:!0,templateResult:function(t){return t.text},templateSelection:function(t){return t.selection||t.text}};i?t.POST(t.baseuri+a.data("model")+"/data/json",{"filters[id][in]":i.split(",")},function(s){if("success"==s.result||"api"==s.result)for(var l=s.data.data,u=0;u<l.length;++u)t('<option value="'+(n?e(l[u],n):l[u].id)+'" selected="selected">'+(r?e(l[u],r):l[u].text)+"</option>").appendTo(a);a.select2(c)},!1):a.select2(c)}),t.fn.extend({tags:function(e){return this.each(function(){var a=t(this),n={language:"zh-CN",ajax:{url:t.baseuri+"admin/tag/data/json",dataType:"json",type:"post",delay:250,data:function(a){var n={page:a.page,_token:t.crsf,filters:{}};return n.filters.keywords={like:a.term},n.filters=t.extend({},n.filters,e),n},processResults:function(t,e){if("success"!=t.result&&"api"!=t.result)return{result:[]};for(var a=[],n=t.data.data,r=0;r<n.length;++r)a.push({id:n[r].keywords,text:n[r].keywords+' <span class="text-muted">('+(n[r].count||0)+"\u6b21\u4f7f\u7528)</span>",selection:n[r].keywords});return{results:a}},cache:!0},escapeMarkup:function(t){return t},minimumInputLength:1,templateResult:function(t){return t.text},templateSelection:function(t){return t.selection||t.text},createTag:function(e){var a=t.trim(e.term);return""===a?null:{id:a,selection:a,text:a+' <span style="color:#f5f5f5">(\u521b\u5efa)</span>',newTag:!0}}};a.select2(t.extend({tags:!0},n))})}})})}(jQuery);